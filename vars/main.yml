---
# Role variables

# Supported distributions

mysql_jdbc_connector_supported_distributions:
  - centos
  - fedora
  - rhel

# Supported distributions versions

mysql_jdbc_connector_supported_versions:
  centos: 6
  fedora: 27
  rhel: 6

# Paths

mysql_jdbc_connector_effective_version: >-
  {{ (mysql_jdbc_connector_version == "latest")
     | ternary(mysql_jdbc_connector_latest_version,
               mysql_jdbc_connector_version) }}

mysql_jdbc_connector_filename: >-
  mysql-connector-java-{{ mysql_jdbc_connector_effective_version }}

mysql_jdbc_connector_jar_filename: "{{ mysql_jdbc_connector_filename }}.jar"

mysql_jdbc_connector_tarball_filename: >-
  {{ (mysql_jdbc_connector_download_url is defined)
     | ternary(mysql_jdbc_connector_download_url
               | default("/")
               | urlsplit("path")
               | basename,
               mysql_jdbc_connector_filename
               + ".tar.gz") }}

mysql_jdbc_connector_downloaded_tarball_filename: >-
  {{ mysql_jdbc_connector_download_dir
     +
     "/"
     + mysql_jdbc_connector_tarball_filename }}

mysql_jdbc_connector_unarchive_dir: >-
  {{ mysql_jdbc_connector_download_dir
    + "/"
    + mysql_jdbc_connector_tarball_filename | regex_replace(".tar.gz", "") }}

# Connector urls

mysql_jdbc_connector_site: >-
  https://dev.mysql.com/downloads/connector/j

mysql_jdbc_connector_latest_mirror: >-
  https://dev.mysql.com/get/Downloads/Connector-J

mysql_jdbc_connector_archive_mirror: >-
  https://downloads.mysql.com/archives/get/file

# Proxy environment settings

mysql_jdbc_connector_http_proxy_config:
    http_proxy: "{{ mysql_jdbc_connector_http_proxy | default('') }}"
    https_proxy: "{{ mysql_jdbc_connector_https_proxy | default('') }}"
    http_no_proxy: "{{ mysql_jdbc_connector_no_proxy | default('') }}"

mysql_jdbc_connector_http_proxy_environment: >-
  {{ (mysql_jdbc_connector_http_proxy is defined
      or mysql_jdbc_connector_https_proxy is defined
      or mysql_jdbc_connector_no_proxy is defined)
     | ternary(mysql_jdbc_connector_http_proxy_config, {}) }}
